/*
findme
chenjianyi

2015-09-12
 */
!function(){function a(a){return document.getElementById(a)}function b(a,b){var c=b-a+1;return Math.floor(Math.random()*c+a)}function c(a){for(var b=document.getElementsByClassName(a);b.length>0;)b[0].parentNode.removeChild(b[0])}function d(a){k.style.display="none";var b={scWidth:i.scWidth[g],scHeight:i.scHeight[g],bxWidth:i.bxWidth[g],bxHeight:i.bxHeight[g],totalTime:i.totalTime[g],level:i.level[g],maxLevel:i.level.length,boxColor:i.boxColor[g],babyBoxColor:i.babyBoxColor[g],babyBoxHeight:i.babyBoxHeight[g],babyBoxWidth:i.babyBoxWidth[g],babyBoxCount:i.babyBoxCount[g]},c=f.createNew(b);c.initEl(),c.initEvent()}function e(){d(g)}var f={createNew:function(d){var f,i,l,m={info:a("info"),scrollview:a("scrollview"),box:a("box"),timecount:a("timecount"),level:a("level"),lb:a("lb")},n=0,o={initEl:function(){l=this,n=h,m.scrollview.style.width=d.scWidth+"px",m.scrollview.style.height=d.scHeight+"px",m.scrollview.style.border="10px solid #f0f0f0",f=l.getViewport(),m.box.style.width=d.bxWidth+"px",m.box.style.height=d.bxHeight+"px",m.box.style.left=b(f.width+d.bxWidth,d.scWidth-d.bxWidth)+"px",m.box.style.top=b(f.height+d.bxHeight,d.scHeight-d.bxHeight)+"px",m.box.style.display="block",m.box.style.backgroundColor=d.boxColor,m.level.innerHTML="第"+d.level+"关",l.babyBoxJoin()},initEvent:function(){document.body.addEventListener("scroll",l.getCurPos,!1),document.body.addEventListener("touchstart",l.touchStartEvent,!1),document.body.addEventListener("touchend",l.touchEndEvent,!1),box.addEventListener("click",l.youFindMeSuccess,!1),window.addEventListener("resize",l.resizeEvent,!1),i=l.intervalTrigger()},clear:function(){document.body.removeEventListener("scroll",l.getCurPos,!1),document.body.removeEventListener("touchstart",l.touchStartEvent,!1),document.body.removeEventListener("touchend",l.touchEndEvent,!1),box.removeEventListener("click",l.youFindMeSuccess,!1),window.removeEventListener("resize",l.resizeEvent,!1),window.clearInterval(i),c("babybox")},getViewport:function(){var a=window,b="inner";return"innerWidth"in window||(b="client",a=document.documentElement||body),{width:a[b+"Width"],height:a[b+"Height"]}},getCurPos:function(){var a=m.box.getBoundingClientRect();a.top>f.height?m.info.innerText="我在下面":a.bottom<0?m.info.innerText="我在上面":a.left>f.width?m.info.innerText="我在右边":a.right<0?m.info.innerText="我在左边":m.info.innerText="快点我！"},resizeEvent:function(){f=l.getViewport(),l.getCurPos()},intervalTrigger:function(){return window.setInterval(function(){d.totalTime--,n++,m.timecount.innerText="剩余时间"+d.totalTime+"s",m.lb.innerHTML="总用时"+n+"s",d.totalTime<=0&&l.youFindMeFail()},1e3)},youFindMeSuccess:function(){m.info.innerText="你找到我了！",l.clear(),k.style.display="block",d.level>=d.maxLevel?(j.innerText="好咯，你赢了咯!!",j.removeEventListener("click",e,!1)):(g++,j.innerText="来!下一关！！",h=n)},youFindMeFail:function(){m.info.innerText="你居然找不到我！T_T",l.clear(),k.style.display="block",j.innerText="重新开始！！"},touchStartEvent:function(){},touchEndEvent:function(){},babyBoxJoin:function(){for(var a=0;a<d.babyBoxCount;a++){var c=document.createElement("div");c.style.width=d.babyBoxWidth+"px",c.style.height=d.babyBoxHeight+"px",c.style.backgroundColor=d.babyBoxColor,c.style.left=b(0,d.scWidth-d.babyBoxWidth)+"px",c.style.top=b(0,d.scHeight-d.babyBoxHeight)+"px",c.classList.add("babybox"),m.scrollview.appendChild(c)}}};return o}},g=0,h=0,i={scWidth:[4e3,6e3,8e3],scHeight:[5e3,7e3,9e3],bxWidth:[100,90,80],bxHeight:[100,90,80],totalTime:[50,40,30],level:[1,2,3],boxColor:["yellow","green","blue"],babyBoxColor:["green","red","orange"],babyBoxHeight:[50,60,70],babyBoxWidth:[50,60,70],babyBoxCount:[50,100,150]},j=a("playbutton"),k=a("playdiv"),l=navigator.userAgent.toLowerCase();if(console.log(l),l.match(/msie ([\d.]+)/))j.innerHTML="你还用IE!?";else if(j.addEventListener("click",e,!1),/android/i.test(l)||/iphone/i.test(l)){console.log("android iphone");var m="body::-webkit-scrollbar {width: 0 !important;height: 0 !important; }",n=document.createElement("style");n.innerHTML=m,document.getElementsByTagName("head")[0].appendChild(n)}else j.innerHTML="话说，这个小游戏不是给电脑玩的",j.style.width="400px"}();